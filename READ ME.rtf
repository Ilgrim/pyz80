{\rtf1\mac\ansicpg10000\cocoartf824\cocoasubrtf410
{\fonttbl\f0\fnil\fcharset77 HelveticaNeue-Bold;\f1\fnil\fcharset77 HelveticaNeue;\f2\fswiss\fcharset77 ArialMS;
\f3\fnil\fcharset77 Monaco;}
{\colortbl;\red255\green255\blue255;\red0\green19\blue125;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc2\leveljcn2\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid0\'02\'05.;}{\levelnumbers\'01;}}{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc2\leveljcn2\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid0\'02\'05.;}{\levelnumbers\'01;}}{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc2\leveljcn2\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid0\'02\'05.;}{\levelnumbers\'01;}}{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc2\leveljcn2\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid0\'02\'05.;}{\levelnumbers\'01;}}{\listname ;}\listid4}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}}
\paperw11900\paperh16840\margl1440\margr1440\vieww14660\viewh15680\viewkind0
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b\fs36 \cf0 pyz80 - a Z80 cross assembler
\f1\b0\fs28 \
\
Version 1.0, released 10 April 2007\
\
By Andrew Collier\
{\field{\*\fldinst{HYPERLINK "http://www.intensity.org.uk/contact.html"}}{\fldrslt http://www.intensity.org.uk/contact.html}}\
\

\f0\b\fs36 Introduction
\f1\b0\fs28 \
\
pyz80 is an assembler for the assembly language of the Z80 micro-processor.\
\
It is designed in particular for producing code to run on the Sam Coup\'8e computer, and outputs disk images  which can be loaded by the SimCoupe emulator, or copied onto floppy disk for use with genuine hardware Sams. Nonetheless, it may be useful for users of other Z80-based platforms as well.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\sa160\ql\qnatural

\f2 \cf0 pyz80 is distributed under the terms of the {\field{\*\fldinst{HYPERLINK "http://www.gnu.org/licenses/gpl.html"}}{\fldrslt \cf2 \ul \ulc2 GNU General Public License}}. You can download and use it at no cost. See the file COPYING for more information.
\f1 \
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural
\cf0 \

\f0\b\fs36 Installation
\f1\b0\fs28 \
\
pyz80 is written in python, and should work on MacOS X, Linux, Windows and other platforms if the appropriate interpreter is installed.\
\
If you do not have python already, installers can be downloaded from:\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural
{\field{\*\fldinst{HYPERLINK "http://www.python.org/download/"}}{\fldrslt \cf0 http://www.python.org/download/}}\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b\fs36 \cf0 Usage\

\f1\b0\fs28 \
pyz80 is a command-line tool. To use it, type pyz80 on your command line followed by the path to your input z80 source file:\
\
e.g.	
\f3\fs24 pyz80 testing/test.z80s
\f1\fs28 \
\
This will assemble the source file, and generate a disk image which contains the object code. You can supply more than one z80 source file, in which case each object file is saved as a separate file in the resulting disk image.\
\
You can also add options (before the source files) to change details about the operation of pyz80:\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 -o outputfile\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 This option allows you to specify the name of the generated disk image. If this option is not given, the name is chosen based on the filename of the input source file (or the first input source file, if you have specified more than one).
\f0\b\fs36 \
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\b0\fs24 \cf0 \
--nozip\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 If this option is given, then the generated disk image will not be compressed. Otherwise, it will be compressed using gzip.\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 \
-I filepath\
   \
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 This option allows you to add an extra file to the disk image. It will be added to the directory before any assembled files, so for example you could add the "SAMDOS" file to the image to make it bootable.\
\
You can add multiple files by using the 
\f3\fs24 -I
\f1\fs28  option more than once:\
\
e.g.	
\f3\fs24 pyz80 -I SAMDOS -I file.txt textReader.z80s
\f1\fs28 \
\
Only code files can be added in this manner, they start at address 32768 and do not auto-execute. If you wish to change the start or execute address of the file, you will need to create a small Z80 source input file containing an MDAT directive. See the Syntax section for further details.\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 \
--obj=outputfile\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 This option allows you to save the generated code as a raw binary file, instead of part of a disk image. If you specify this option, no disk image will be generated (unless you also explicitly specify an output disk image file name).\
\
You may only assemble a single input Z80 source file if you use this option.
\f3\fs24 \
\
-D symbol\
-D symbol=value\
   \

\f1\fs28 This option defines a symbol before beginning to assemble the source file. The value of the symbol will be available to all expressions, both within instructions and also in assembler directives.
\f3\fs24 \

\f1\fs28 \
Since every symbol must have an integer value, if nothing is specified then 1 will be assumed.
\f3\fs24 \
\
--exportfile=file\
\

\f1\fs28 This option allows you to save the whole symbol table to a file, following assembly.\
\
Only one file can be exported in this fashion. The file format is likely to be specific to the version of python in use.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 --importfile=file\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 This option allows you to import a symbol table which had previously been saved with the corresponding 
\f3\fs24 --exportfile
\f1\fs28  option. All the symbols which had been defined during the first assembly run, will be available to any part of your input Z80 source.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 --case\
   
\f1\fs28 \
If this option is given, then all symbols in the input Z80 source file will be treated as case sensitive (this is the behaviour of the original COMET assembler). Otherwise, any combination of lower case or upper case will be considered equivalent.\
\
Please note this applies only to symbols. Instruction op-codes are always accepted in any combination of upper and lower case.\
\

\f3\fs24 --nobodmas\
   
\f1\fs28 \
If this option is given, then all expressions will be parsed from left to right instead of using the usual operator ordering rules, although brackets can still be used to specify precedence. For example the result of 
\f3\fs24 10+10/10
\f1\fs28  in this mode will be two and not eleven (this is the behaviour of the original COMET assembler).\
\

\f3\fs24 -s regexp\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 This option allows you to print out the final value of one or more symbols at the end of assembling a source file. If you specify the text name of a particular symbol, pyz80 will print out the value of that symbol, and any others whose name completely contains what you have asked for:\
\
e.g.	
\f3\fs24 pyz80 -s LDI3 testing/test.z80s\

\f1\fs28 prints
\f3\fs24 	\{'LDI31': 33802, 'LDI3': 32850, 'LDI30': 33741, 'LDI32': 33865\}
\f1\fs28 \
\
Another common use is to print the value of every symbol in the whole assembly, by using the wild-card character (full stop):\
\
e.g.	
\f3\fs24 pyz80 -s . testing/test.z80s\
\

\f1\fs28 Most precisely, 
\f3\fs24 regexp
\f1\fs28  is a regular expression in python's format; if any part of a symbol matches the expression, then the symbol will be printed.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 -e\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 If there are errors in the source code, pyz80 will attempt to diagnose the problem and tell you which line of the input Z80 source file is causing the problem. Occasionally, however, it can be difficult to see what mistake in that line is causing the confusion. If this option was specified on the command line, pyz80 will allow the python interpreter to print out its own messages about the problems it found, which may provide more detailed information.\

\f0\b\fs36 \
Syntax
\f1\b0\fs28 \
\
The input Z80 source text files have a format similar to that used by COMET, one of the Sam's most popular native assemblers.\
\
Each line of the source file may contain one symbol definition, and one Z80 instruction or assembler directive.\
\
Comments start with semicolon and continue to the end of the line.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b \cf0 Instructions
\f1\b0 \
\
Z80 instructions and assembler directives may be formatted in upper or lower case.\
\
e.g.		
\f3\fs24 ld A,(DE)\
		INC e
\f1\fs28 \
\
pyz80 recognises all valid Z80 instructions, included those traditionally undocumented. In instructions where the low byte or high byte of the index registers can be addressed individually, they are referred to in pyz80 syntax as 
\f3\fs24 IXh
\f1\fs28 , 
\f3\fs24 IXl
\f1\fs28 , 
\f3\fs24 IYh
\f1\fs28  and 
\f3\fs24 IYl
\f1\fs28 . \
\
The undocumented compound instructions (shift and rotate instructions which operate through the index registers and also copy the resulting value into a main register) have the following form of syntax in pyz80:\
\
e.g.	 	
\f3\fs24 ROT r, (IX+c)\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 Undocumented instruction 
\f3\fs24 SLL
\f1\fs28  is also included, but because it doesn't operate as its name implies, pyz80 emits a warning when it is used. To assemble this instruction without a warning, use the opcode 
\f3\fs24 SL1
\f1\fs28  instead.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b \cf0 Symbols
\f1\b0 \
\
Symbols are defined by the symbol name at the start of a line, followed by colon. They are generally given the address of the following instruction, but can be assigned explicitly using the EQU directive.\
\
Symbols can contain any alphanumeric character, underscore, and full stop. Symbols formatted in upper or lower case may be used interchangeably, unless 
\f3\fs24 --case
\f1\fs28  was specified on the command line.\
\
General symbols have global scope. A symbol defined anywhere in the source is valid at all other points in the source, and must be defined only once.\
\
A symbol starting with the @ sign (or consisting of the @ sign alone) is a local symbol. You may define a local symbol with the same name multiple times within the source, and this is not an error. The value of a local symbol is always taken from the a definition in the same file, the nearest definition to the point where the symbol is being used.\
\
When using a local symbol, you can add + (or -) immediately following the @ sign, which forces pyz80 to use the next (or previous) definition respectively, always ignoring matches in the opposite direction.\
\
e.g.	
\f3\fs24 @loop:	call work\
		dec b\
		jr nz, @-loop	; jump up two lines\
\
		ld b,7\
	@loop:	call office\
		dec b\
		jr nz, @loop\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 \
\
Where a pair of braces is used as part of a symbol name, the value of the expression inside will be substituted into the name of the symbol being defined or used.\
\
e.g.	
\f3\fs24 nine:	equ 9\
	k\{nine\}:	equ $   ; defines a symbol called k9\
 		        ; is equivalent to  k9: equ $\
\

\f1\fs28 Note that the symbol being substituted must be available in the first pass of the assembler (i.e. it must be defined earlier in the file than it is used).\
\
The expression 
\f3\fs24 defined (symbol)
\f1\fs28  tests whether a symbol is defined anywhere in the source, without causing an error if it is not found. The value of this expression is always either 0, if the symbol does not exist, or 1, if it is defined no matter what its value. It can be particularly useful in conjunction with the command line option -D, which allows you to build variant code files without changing the source.\
\
e.g.		
\f3\fs24 ld a, defined(DEBUG)
\f1\fs28 \
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b \cf0 Assembler directives
\f1\b0 \
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 ORG address
\f1\fs28 \
\
Specify the origin of the code, i.e. the address from which it is intended to be run. This can be anywhere in the address range of the Z80, that is, 0 to 65535.\
\

\f3\fs24 DUMP address\
DUMP page, offset
\f1\fs28 \
\
Specify the destination address of the code output. This directive is available in two forms. The first takes an 
\f3\fs24 address
\f1\fs28  from 16384 to 65535, these are addresses in pages 0 to 2 as addressed in BASIC. The second form takes a 
\f3\fs24 page
\f1\fs28  number from 0 to 31, and an 
\f3\fs24 offset
\f1\fs28  within that page of 0 to 16383.\
\

\f3\fs24 AUTOEXEC\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 \
The current 
\f3\fs24 DUMP
\f1\fs28  address will be marked as the execute address in the directory entry of the output disk image. When the code file is loaded from the disk image by SamDOS, it will automatically call the execute address. Note that when a machine code routine is called from BASIC it will usually be paged into section C of the address space.
\f3\fs24 \

\f1\fs28 \
This directive may not be used more than once during assembly.
\f3\fs24 \
\
DEFB  n [,n ...]\
DB    n [,n ...]\
\

\f1\fs28 Define bytes at the current address. Either DEFB or DB are allowed and are equivalent in meaning. n can be a literal number or any expression, in the range 0 to 255 (or -128 to +127).
\f3\fs24 \
\
DEFW  n [,n ...]\
DW    n [,n ...]\

\f1\fs28 \
Define words at the current address. Either DEFW or DW are allowed and are equivalent in meaning. n can be a literal number or any expression, in the range 0 to 65535 (or -32768 to +32767).
\f3\fs24 \
\
DEFM  "string"\
DM    "string"\
\

\f1\fs28 Define a message at the current address. The string is always delimited by double quotes. To include a double quote in the string itself, place two double quote characters adjacent to each other.
\f3\fs24 \
\
DEFS  n\
DS    n\
\

\f1\fs28 Define storage space at the current address. The current address increases by n bytes, thus leaving them available for your program's own use.
\f3\fs24 \
\
DS ALIGN n\
\

\f1\fs28 This ensures that the following instruction will be aligned on the boundary specified, by leaving a space if necessary.\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 \
MDAT "filename"
\f1\fs28 \

\f3\fs24 \
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 This directive merges a data file from the host filesystem into the object code at the current address. filename is enclosed in double-quotes and is expressed relatively to the file currently being assembled.\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 \
INC
\f1\fs28  
\f3\fs24 "filename"
\f1\fs28 \

\f3\fs24 INCLUDE "filename"\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 This directive\
\
(Both forms of this directive are equivalent, but 
\f3\fs24 INCLUDE
\f1\fs28  is available to avoid confusion with the Z80's 
\f3\fs24 INC
\f1\fs28  instruction)
\f3\fs24 \
\
FOR range, instruction\
\

\f1\fs28 Repeats a single instruction (or directive) 
\f3\fs24 range
\f1\fs28  times.\
\
During assembly of this instruction, a symbol 
\f3\fs24 FOR
\f1\fs28  is valid and holds the iteration number from 0 to 
\f3\fs24 range
\f1\fs28 -1.
\f3\fs24 \
\
symbol: EQU FOR range\
	...\
NEXT symbol\
\

\f1\fs28 Repeats several lines of assembly, 
\f3\fs24 range
\f1\fs28  times. When the lines between 
\f3\fs24 EQU FOR
\f1\fs28  and 
\f3\fs24 NEXT
\f1\fs28  are being assembled,  the symbol 
\f3\fs24 symbol
\f1\fs28  is valid, and holds the iteration number from 0 to 
\f3\fs24 range-1
\f1\fs28 .\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 FOR...NEXT 
\f1\fs28 blocks can be nested, with each layer using a different symbol name.
\f3\fs24 \
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 \
Where a local symbol is defined within a 
\f3\fs24 FOR...NEXT
\f1\fs28  block, it can only be used within the same block. All references to it will target the same iteration.
\f3\fs24 \
\
IF expression\
	...\
[ELSE IF expression]\
	...\
[ELSE]\
	...\
ENDIF\
\

\f1\fs28 An 
\f3\fs24 IF 
\f1\fs28 block allows conditional assembly of your source based on some condition. For example, you may want to introduce some features during development of an application but to leave them out of release builds; in this case, IF blocks can be effectively used in conjunction with the 
\f3\fs24 -D
\f1\fs28  command line option.\
\
e.g.	
\f3\fs24 IF defined (DEBUG)\
		XOR A\
		OUT (CLUT),a\
	ENDIF\
\

\f1\fs28 Note that any symbols used in the expression must be available in the first pass of the assembler (i.e. they must be defined earlier in the file than they are used).\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 \
ASSERT condition\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\fs28 \cf0 \
This directive evaluates whether 
\f3\fs24 condition
\f1\fs28  is true, and aborts assembly if not. For example, this can be used to ensure that the size of your code has not overstepped any limits you may be imposing.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b \cf0 Expressions and special characters\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f1\b0 \cf0 \
Wherever an instruction or directive requires a number, a mathematical expression can be used instead. These are allowed to contain any symbol names defined in the file. If the result of an expression is negative, it will appear in the instruction in two's complement.\
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f3\fs24 \cf0 $	
\f1\fs28 a symbol representing the address of the current instruction\
\

\f3\fs24 &	
\f1\fs28 prefixes a hexadecimal number\

\f3\fs24 0x	
\f1\fs28 prefixes a hexadecimal number\

\f3\fs24 %	
\f1\fs28 prefixes a binary number\

\f3\fs24 0b	
\f1\fs28 prefixes a binary number\
\

\f3\fs24 "	
\f1\fs28 a single character enclosed in double-quotes can be used to represent the ascii value of that character\

\f3\fs24 ""	
\f1\fs28 strings are delimited by the double-quote character. To encode a literal double-quote within a string, use the double-quote character twice.\
\

\f3\fs24 \\	
\f1\fs28 mod\
\
Several mathematical functions are available within expressions. You may use any method of the 
\f3\fs24 random
\f1\fs28  or 
\f3\fs24 math
\f1\fs28  python modules; a few examples are listed below:\
\

\f3\fs24 random()
\f1\fs28 \
\
Returns a random floating point number between 0 and 1. It should be noted that while intermediate stages of the calculation are allowed to have non-integer values, the final value of an expression is always rounded to the nearest integer. Thus it can be useful to multiply float numbers by a constant to keep them in a useful range:\
\
e.g.		
\f3\fs24 DEFB random()*256
\f1\fs28 \
\

\f3\fs24 randrange(start,stop [,step])
\f1\fs28 \
\
Returns a random integer in the range 
\f3\fs24 start
\f1\fs28  \'b2 x < 
\f3\fs24 stop
\f1\fs28 \
\

\f3\fs24 sin(angle)\
cos(angle)	
\f1\fs28  \

\f3\fs24 \
angle
\f1\fs28  is specified in radians.
\f3\fs24 \
\
pi	
\f1\fs28  \
\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b\fs36 \cf0 Thanks
\f1\b0\fs28 \
\
Thanks to Edwin Blink for writing the original COMET assembler for the Sam Coup\'8e.\
\
Thanks to Simon Owen and other users for their feedback during development.\
\

\f0\b\fs36 Links
\f1\b0\fs28 \
\
pyz80 web page:\
	{\field{\*\fldinst{HYPERLINK "http://www.intensity.org.uk/samcoupe/pyz80.html"}}{\fldrslt http://www.intensity.org.uk/samcoupe/pyz80.html}}\
\
SimCoupe Homepage:\
	{\field{\*\fldinst{HYPERLINK "http://www.simcoupe.org/"}}{\fldrslt http://www.simcoupe.org/}}\
\
World of Sam archive:\
	{\field{\*\fldinst{HYPERLINK "http://www.worldofsam.org/"}}{\fldrslt http://www.worldofsam.org/}}\
\
Wikipedia entry for the SAM Coup\'8e (and for more links):\
	{\field{\*\fldinst{HYPERLINK "http://wikipedia.org/wiki/Sam_Coupe"}}{\fldrslt http://wikipedia.org/wiki/Sam_Coupe}}\
\

\f0\b\fs36 Disclaimer
\f1\b0\fs28 \
\
THIS PROGRAM AND DOCUMENTATION ARE PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, NOT EVEN THE IMPLIED WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.  BY USING THE PROGRAM, YOU AGREE TO BEAR ALL RISKS AND LIABILITIES ARISING FROM THE USE OF THE PROGRAM AND DOCUMENTATION AND THE INFORMATION PROVIDED BY THE PROGRAM AND THE DOCUMENTATION.\
\

\f0\b\fs36 Release History
\f1\b0\fs28 \
\
Version 1.0, 6 April 2007\
\
\pard\tx220\tx720\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\ql\qnatural\pardirnatural
\ls1\ilvl0\cf0 {\listtext	\'a5	}option to include other files on the resulting disk image, or multiple object files\
{\listtext	\'a5	}IXh, IXl, IYh and IYl can be used in operands where this forms a valid (undocumented) instruction\
{\listtext	\'a5	}fixed ex (sp),ix\
{\listtext	\'a5	}fixed parse bug if a symbol name starts with IX or IY\
{\listtext	\'a5	}support for "compound" instructions such as RLC r,(IX+c)\
{\listtext	\'a5	}option to not gzip the disk image\
{\listtext	\'a5	}option to save raw binaries and not just into disk images\
{\listtext	\'a5	}option to treat labels as case sensitive (as COMET itself does)\
{\listtext	\'a5	}option to work without bodmas operator precedence (as COMET itself does)\
{\listtext	\'a5	}better package with documentation and test sources\
{\listtext	\'a5	}"local" symbols starting with the @ character do not need to be unique; use them for the beginning of loops, for example. Any references to them will go to the nearest in the same file (or use @+ and @- for always the next or previous respectively)\
{\listtext	\'a5	}IF, ELSE (IF), ENDIF pseudo-opcodes\
{\listtext	\'a5	}defined(symbol) tests whether a symbol exists\
{\listtext	\'a5	}multi-line FOR constructs for repeating sequences of instructions\
{\listtext	\'a5	}curly braces text-substitute the value of one symbol into the name of another, \
{\listtext	\'a5	}option to predefine symbols from the pyz80 command line\
{\listtext	\'a5	}option to save and load whole symbol tables\
{\listtext	\'a5	}saved files include only used space, and not the rest of the page\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural
\cf0 \
Version 0.6, 10 February 2006\
\
\pard\tx220\tx720\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\ql\qnatural\pardirnatural
\ls2\ilvl0\cf0 {\listtext	\'a5	}implemented SLL (with a warning)\
{\listtext	\'a5	}use directive AUTOEXEC (usually straight after a DUMP) to set automatic execution of code from the current target address\
{\listtext	\'a5	}simple test to stop output file overwriting source file\
{\listtext	\'a5	}instructions may now be tab separated, not just space\
{\listtext	\'a5	}add warning when operands are generated out of range of the instruction\
{\listtext	\'a5	}better default output file name\
{\listtext	\'a5	}cope better with errors in z80s source (symbol names used twice)\
{\listtext	\'a5	}added -e option (lets you see python's error messages directly)\
{\listtext	\'a5	}allow . in symbol names\
{\listtext	\'a5	}file doesn't have to start at page boundary (helpful for writing boot sectors and stuff)\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural
\cf0 \
Version 0.5, 15 January 2005\
\
\pard\tx220\tx720\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\ql\qnatural\pardirnatural
\ls3\ilvl0\cf0 {\listtext	\'a5	}new pseudo-opcode: FOR limit, codeseq\
{\listtext	\'a5	}allow % as a prefix to binary numbers\
{\listtext	\'a5	}fix LD (IX+n),n\
{\listtext	\'a5	}slightly more flexibility if EQU definition depends on a symbol has not been defined until later in the source file (this is not allowed to affect code size)\
{\listtext	\'a5	}allow leading zeros in decimal literals (passing these directly to the python expression parser as previously would cause them to be treated as octal)\
{\listtext	\'a5	}allow DB, DW ... as shorthand forms of DEFB, DEFW etc\
{\listtext	\'a5	}allow character constants expressions (e.g. DB "A")\
{\listtext	\'a5	}save file correctly if unused part of the last sector falls out of memory\
{\listtext	\'a5	}more robust expression parser doesn't replace substrings of symbols\
{\listtext	\'a5	}DEFM can cope with strings containing semicolons, colons\
{\listtext	\'a5	}import python math and random modules to make some of its functions available to the expression parser\
{\listtext	\'a5	}removed nesting of functions because the scoping rules don't seem to work the way FOR needs them\
{\listtext	\'a5	}fixed confusion between INC opcode and INC (include) directive\
{\listtext	\'a5	}changed file loading slightly because fileinput doesn't cut the recursive mustard.\
{\listtext	\'a5	}allow underscore character in symbol names, and sanity check for syntax errors\
{\listtext	\'a5	}print a subset of the symbol table after assembly is complete\
{\listtext	\'a5	}files included by files included along a relative path will search for their files on that path\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural
\cf0 \
Version 0.1, 19 November 2004\
\
\pard\tx220\tx720\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\li720\fi-720\ql\qnatural\pardirnatural
\ls4\ilvl0\cf0 {\listtext	\'a5	}initial release\
\pard\tx1133\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural
\cf0 \
}